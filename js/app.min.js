(()=>{"use strict";(()=>{const e={};let t={getErrors(e){let t=0;return e.querySelectorAll("[data-required]").forEach((e=>{t+=this.validateInput(e)})),t},validateInput(e){let a=0;return"tel"===e.dataset.required&&e.value.length<e.getAttribute("maxlength")&&(t.errorAddBlock(e,"Введите корректный номер телефона"),t.addErrorClass(e),a++),e.dataset.maxLength&&e.value.length>e.dataset.maxLength&&(t.errorAddBlock(e,`Максимальное количество символов ${e.dataset.maxLength}`),t.addErrorClass(e),a++),e.dataset.minLength&&e.value.length<e.dataset.minLength&&(t.errorAddBlock(e,`Минимальное количество символов ${e.dataset.minLength}`),t.addErrorClass(e),a++),"email"===e.dataset.required?t.emailTest(e)&&(t.errorAddBlock(e,"Введите корректный email"),t.addErrorClass(e),a++):"checkbox"===e.getAttribute("type")&&!1===e.checked&&(t.addErrorClass(e),a++),""===e.value&&(t.errorAddBlock(e,"Заполните это поле"),t.addErrorClass(e),a++),a},addErrorClass(e){e.parentElement.classList.add("_form-error"),e.classList.add("_form-error")},removeErrorClass(e){e.parentElement.classList.remove("_form-error"),e.classList.remove("_form-error")},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value),errorAddBlock(e,t){const a=e.parentElement.querySelector(".input-error");a&&e.parentElement.removeChild(a),e.parentElement.insertAdjacentHTML("beforeend",`<div class="input-error">${t}</div>`)},errorRemoveBlock(e){e.parentElement.querySelector(".input-error")&&e.parentElement.removeChild(e.parentElement.querySelector(".input-error"))},addValidClass(e){e.classList.add("_input-valid")},removeValidClass(e){e.classList.remove("_input-valid")},addValidSuccessClass(e){e.classList.add("_input-valid-success")},removeValidSuccessClass(e){e.classList.remove("_input-valid-success")}};function a(e){const t=e.target;if(t.closest(".actions-header__current")){const e=t.closest(".actions-header__item"),a=document.querySelector("._show-dropdown");e.classList.toggle("_show-dropdown"),window,innerWidth>489.98&&a&&a!==t&&a.classList.remove("_show-dropdown")}else!t.closest(".actions-header__item")&&document.querySelector(".drop-menu")&&document.querySelectorAll(".actions-header__item").forEach((e=>e.classList.remove("_show-dropdown")))}new class{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((e=>{const t=e.dataset.da.trim().split(","),a={};a.element=e,a.parent=e.parentNode,a.destination=document.querySelector(`${t[0].trim()}`),a.breakpoint=t[1]?t[1].trim():"767",a.place=t[2]?t[2].trim():"last",a.index=this.indexInParent(a.parent,a.element),this.оbjects.push(a)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`)).filter(((e,t,a)=>a.indexOf(e)===t)),this.mediaQueries.forEach((e=>{const t=e.split(","),a=window.matchMedia(t[0]),s=t[1],r=this.оbjects.filter((({breakpoint:e})=>e===s));a.addEventListener("change",(()=>{this.mediaHandler(a,r)})),this.mediaHandler(a,r)}))}mediaHandler(e,t){e.matches?t.forEach((e=>{this.moveTo(e.place,e.element,e.destination)})):t.forEach((({parent:e,element:t,index:a})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,a)}))}moveTo(e,t,a){t.classList.add(this.daClassname),"last"===e||e>=a.children.length?a.append(t):"first"!==e?a.children[e].before(t):a.prepend(t)}moveBack(e,t,a){t.classList.remove(this.daClassname),void 0!==e.children[a]?e.children[a].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:0:e.breakpoint-t.breakpoint)):e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:0:t.breakpoint-e.breakpoint))}}("max").init(),window.addEventListener("load",(function(){document.addEventListener("click",a)})),window.addEventListener("resize",(function(){document.querySelector(".actions-header__button")&&(window.innerWidth<489.98?document.querySelector(".actions-header__button").setAttribute("aria-label","login"):document.querySelector(".actions-header__button").removeAttribute("aria-label"))}));const s=document.querySelector(".header");new IntersectionObserver((e=>{e[0].isIntersecting?s.classList.remove("_header-scroll"):s.classList.add("_header-scroll")})).observe(s),window.addEventListener("load",(function(){document.addEventListener("click",(function(e){const t=e.target;t.closest(".icon-menu")&&t.closest(".icon-menu")&&(document.documentElement.classList.toggle("menu-open"),document.documentElement.classList.toggle("lock"))}))})),function(e={viewpass:!1,maskTel:!1,valid:!1}){if(document.body.addEventListener("focusin",(function(e){const a=e.target;"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName||(a.parentElement.classList.add("_form-focus"),a.classList.add("_form-focus"),t.removeErrorClass(a),t.errorRemoveBlock(a))})),document.body.addEventListener("focusout",(function(e){const a=e.target;"INPUT"!==a.tagName&&"TEXTAREA"!==a.tagName||(a.parentElement.classList.remove("_form-focus"),a.classList.remove("_form-focus")),a.hasAttribute("data-validate")&&t.validateInput(a)})),e.viewpass&&document.addEventListener("click",(function(e){const t=e.target;if(t.closest('[class*="__viewpass"]')){let e=t.classList.contains("_viewpass-active")?"password":"text";t.parentElement.querySelector("input").setAttribute("type",e),t.classList.toggle("_viewpass-active")}})),e.maskTel){const a=document.querySelectorAll("[data-tel-input]");function s(e){const t=e.target;let a=r(t),s="",n=t.selectionStart;if(!a)return t.value="";t.value.length==n?(["7","8","9"].indexOf(a[0])>-1?(t.setAttribute("maxlength","18"),"8"==a[0]&&t.setAttribute("maxlength","17"),"9"==a[0]&&(a="7"+a),s=("8"==a[0]?"8":"+7")+" ",a.length>1&&(s+="("+a.substring(1,4)),a.length>=5&&(s+=") "+a.substring(4,7)),a.length>=8&&(s+="-"+a.substring(7,9)),a.length>=10&&(s+="-"+a.substring(9,11))):(t.setAttribute("maxlength","12"),s="+"+a.substring(0,11)),t.value=s):e.data&&/\D/g.test(e.data)&&(t.value=a)}function r(e){return e.value.replace(/\D/g,"")}function n(e){const a=e.target;8==e.keyCode&&1==r(a).length&&(a.value="",a.hasAttribute("data-input-valid")&&(t.removeValidClass(a),t.removeErrorClass(a)))}function o(e){const t=e.clipboardData||window.Clipboard,a=e.target,s=r(a);if(t){const e=t.getData("Text");/\D/g.test(e)&&(a.value=s)}}function i(e){const t=e.target;t.dataset.inputLabel&&t.parentElement.insertAdjacentHTML("beforeend",`<div class="form__label-block">${t.dataset.inputLabel}</div>`)}function l(e){const t=e.target;t.parentElement.querySelector(".form__label-block")&&t.parentElement.removeChild(t.parentElement.querySelector(".form__label-block"))}a&&a.forEach((e=>{e.addEventListener("input",s),e.addEventListener("keydown",n),e.addEventListener("paste",o),e.addEventListener("focusin",i),e.addEventListener("focusout",l)}))}if(e.valid){const d=document.querySelectorAll("[data-input-valid]");d&&d.forEach((e=>{e.addEventListener("input",(function(){if(""!==e.value?(t.addValidClass(e),t.addValidSuccessClass(e)):(t.removeErrorClass(e),t.removeValidClass(e),t.removeValidSuccessClass(e)),e.hasAttribute("data-min-length")){const a=e.dataset.minLength;e.value.length<a?(t.removeValidSuccessClass(e),t.addErrorClass(e),""==e.value&&t.removeErrorClass(e)):(t.addValidSuccessClass(e),t.removeErrorClass(e))}if(e.hasAttribute("data-max-length")){const a=e.dataset.maxLength;e.value.length>a?(t.removeValidSuccessClass(e),t.addErrorClass(e)):(t.addValidSuccessClass(e),t.removeErrorClass(e),t.addValidClass(e)),""==e.value&&(t.removeValidClass(e),t.removeValidSuccessClass(e))}if(e.hasAttribute("data-tel-input")){const a=e.getAttribute("maxlength");e.value.length<a?(t.removeValidSuccessClass(e),t.addErrorClass(e),""==e.value&&t.removeErrorClass(e)):(e.classList.add("_input-valid-success"),t.removeErrorClass(e))}}))}))}}({viewpass:!1,maskTel:!1,valid:!1}),function(){const a=document.forms;if(a.length)for(const e of a)e.addEventListener("submit",(function(e){s(e.target,e)}));async function s(a,s){if(0===t.getErrors(a))if(a.hasAttribute("data-ajax")){s.preventDefault();const t=a.getAttribute("action")?a.getAttribute("action").trim():"#",n=a.getAttribute("method")?a.getAttribute("method").trim():"GET",o=new FormData(a);if(a.classList.add("_sending"),(await fetch(t,{method:n,body:o})).ok)r(a),a.classList.remove("_sending");else{if(a.setAttribute("data-response-error","#response-error"),e.popup){const t=a.dataset.responseError;t&&e.popup.open(t)}a.removeAttribute("data-response-error"),a.classList.remove("_sending")}}else a.hasAttribute("data-dev")&&(s.preventDefault(),r(a));else s.preventDefault()}function r(t,a=""){if(document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),e.popup){const a=t.dataset.popupMessage;a&&e.popup.open(a)}t.reset()}}()})()})();